<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [HTTP存在的安全性问题：](#http%E5%AD%98%E5%9C%A8%E7%9A%84%E5%AE%89%E5%85%A8%E6%80%A7%E9%97%AE%E9%A2%98)
  - [HTTPS的作用](#https%E7%9A%84%E4%BD%9C%E7%94%A8)
  - [HTTPS是如何解决安全问题的](#https%E6%98%AF%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3%E5%AE%89%E5%85%A8%E9%97%AE%E9%A2%98%E7%9A%84)
  - [HTTPS通信流程](#https%E9%80%9A%E4%BF%A1%E6%B5%81%E7%A8%8B)
  - [HTTP与HTTPS的区别](#http%E4%B8%8Ehttps%E7%9A%84%E5%8C%BA%E5%88%AB)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->

# HTTP存在的安全性问题：
- 传输信息使用未加密的明文，从客户端到服务器，中间会经过很多阶段，每个阶段都有可能被篡改数据
- 客户端和服务器都无法验证接收到的信息的完整性，有可能信息已经在中间的某一阶段被篡改
- 不验证通信方身份，无法确认请求的来源，可能会被伪装

HTTP是明文传输的，而HTTPS将数据加密后进行传输

HTTPS协议 = HTTP协议 + SSL/TLS协议， 在HTTPS数据传输的过程中，需要用SSL/TLS对数据进行加密和解密，需要用HTTP对加密后的数据进行传输，由此可以看出HTTPS是由HTTP和SSL/TLS一起合作完成的。

SSL的全称是Secure Sockets Layer，即安全套接层协议，是为网络通信提供安全及数据完整性的一种安全协议

TLS的全称是Transport Layer Security，即安全传输层协议

## HTTPS的作用
- 对数据进行加密，建立一个信息安全通道，保证传输过程中的数据安全
- 对网站双方进行身份认证

## HTTPS是如何解决安全问题的
1. 解决内容可能被窃听的问题 - 加密

    - 对称加密

        加密和解密使用同一个秘钥

    - 非对称加密

        使用一对公开密钥和私有秘钥对内容加密和解密。服务器将公钥发送给客户端， 客户端通过公钥加密数据，传到服务器， 服务器在使用自己的私钥对加密数据进行解密
    - 对称加密+非对称加密（HTTPS使用该方式）

        在交换秘钥的时候使用非对称加密方式，在传输数据的时候使用对称加密方式

        客户端使用服务器的公钥对'对称秘钥'进行加密，传输对称秘钥到服务器， 服务器使用自己的私钥对'对称秘钥'解密。客户端使用对称秘钥对数据进行加密，服务器端使用对称秘钥对数据进行解密

2. 解决报文可能被篡改的问题 - 数字签名

    - 发送方提取报文信息通过hash算法生成唯一摘要
    - 发送方使用私钥对摘要进行加密，形成数字签名，并将改签名附带在报文上传送到接收方
    - 接收方接收到报文后使用相同的算法提取报文信息生成摘要
    - 接收方使用公钥对数字签名解密，得到发送方传递的摘要
    - 比较两个摘要，如果摘要相同， 说明数据是完整的

3. 解决通信双方身份可能被伪装的问题 - 数字证书

    - 服务器端人员申请第三方CA证书，申请通过后获取到认证证书(包括申请者公钥，认证机构， 有效期，认证机构对正清信息的加密签名)
    - 客户端向服务器端发起认证请求， 服务器端返回认证证书
    - 客户端检测认证证书的合法性。客户端获取到证书信息后，使用相同的算法对证书信息生成摘要，使用CA公钥解密签名对比两个摘要信息，判断合法性

## HTTPS通信流程
- 服务端需要先申请一个证书，将自己的公钥，信息等上传到第三方认证机构，通过审核后，第三方机构会用自己的私钥对上传的信息包括公钥进行加密生成一个签名，并把签名，认证机构，过期时间等作为一个证书返回给服务器端
  
- 验证证书
  - 客户端发起HTTPS请求，请求建立SSL连接
  - 服务端返回申请到HTTPS证书和自己的公钥
  - 客户端检验证书是否合法，不合法则提示警告
- 传输数据
  - 验证证书合法后，客户端生成一个秘钥
  - 通过服务端公钥，对生成的私钥进行加密，并把加密后的私钥传输到服务器
  - 服务器使用自己的私钥对传输过来的数据进行解密， 得到对称秘钥，此时双方有了相同的对称秘钥
  - 服务器使用对称秘钥加密明文，传递数据给客户端
  - 客户端通过对称秘钥解密明文
  - 客户端可在此发送请求

## HTTP与HTTPS的区别
- HTTPS比HTTP更安全，搜索引擎会优先搜索HTTPS网站
- HTTPS需要使用SSL证书
- HTTPS默认端口443， HTTP默认端口80
- HTTPS基于传输层， HTTP基于应用层
