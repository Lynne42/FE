<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->
**Table of Contents**  *generated with [DocToc](https://github.com/thlorenz/doctoc)*

- [切入角度](#%E5%88%87%E5%85%A5%E8%A7%92%E5%BA%A6)
  - [基础层](#%E5%9F%BA%E7%A1%80%E5%B1%82)
  - [应用层](#%E5%BA%94%E7%94%A8%E5%B1%82)

<!-- END doctoc generated TOC please keep comment here to allow auto update -->


# 切入角度

- 基础层

  基础审核建设， 与业务解耦， 具有通用型
  
- 应用层

  具体应用


## 基础层

- **版本管理**

- **自动编译，发布**

  在线平台编译代码，编译完成自动发布CDN或静态资源服务器

- **纯前端版本发布**

  即只涉及到前端的资源发布， 前后端分离， 不依赖于后端服务， 用于快速发布及回滚

  - 前端发布到生产环境——此时可以通过外网链接加正确的版本号访问到新版本的代码，但页面上的资源还是旧版本；

  - 前端通过配置工具（或者是直接更新html文件），将html中引入的资源，改为新版本。

- **统一脚手架**

  - 场景： 有较多独立中小项目
  - 优点：
    - 较少配置脚手架带来的时间损耗
    - 统一项目结构， 方便管理， 降低项目交接时带来的熟悉项目的时间
    - 统一技术栈，抽离/引入固定组件库

- **Node中间层**

  - 场景：

    - 需要SEO且前端使用React/Vue
    - 前端介入后端逻辑， 直接读取后端服务或者数据库的情况

- **日志埋点系统**
  
  - 意义

    - 流量监控, PV, UV
    - 构建用户行为路径
    - 记录功能使用量
    - 对埋点数据处理、分析、建模， 可以挖掘用户喜好、需求， 判断产品效果及走向
    - 为营销策略提供数据支持
    - 实施AB Testing
    - 作为数据平台中，数据采集的一个不可缺少的环节

- **监控和报警系统**




- **安全管理**

  - XSS注入
  - HTTPS
  - CSRF

- **ESlint**

  可基于eslint配置团队风格

  - 降低低级bug出现的频率
  - 增加代码可维护性， 可阅读性
  - 统一代码风格

- **灰度发布**

  灰度发布是大型项目在发布时的常见方法，指在发布版本时，初始情况下，只允许小比例（比如1~5%比例的用户使用），若出现问题时，可以快速回滚使用老版本，适用于主链路和访问量极大的页面。

  好处有以下几点：

    - 生产环境比开发环境复杂，灰度发布时可以在生产环境小范围尝试观察新版本是否可以正常运行，即使出问题，也可以控制损失。

    - 对于大版本更新，可以先灰度一部分，观察埋点效果和用户反馈（即所谓的抢先试用版）。假如效果并不好，那么回滚到老版本也可以及时止损；

    - 当我们需要验证某些想法或问题的时候，可以先灰度一部分，快速验证效果如何，然后查漏补缺或者针对性优化；
    

    灰度发布通常分为多个阶段：【1】1%；【2】5~10%；【3】30~50%；【4】全量推送（100%）。灰度发布一定要允许配置某些IP/账号访问时，可以直接访问到灰度版本。

- **前后端分离**

  中小项目常见的情况是后端只提供接口和让某个url指向某个html，前端负责html、css、js等静态资源。
但大型项目并不建议这么做，建议前端负责除html以外的静态资源，而html交给后端处理，理由有很多：

    - 后端进行渲染，方便统一插入一些代码和资源，例如埋点js，监控js，国际化文本资源，页面标识符等。这些通常是后端通过调用某些服务直接写入的；

    - 当页面需要统一的头尾时（参考淘宝里我的淘宝页面），前端不应该关注这些跟当前页面无关的东西；

    - 某些东西，如果通过html来管理，那么耦合度太高了，违背了解耦和分离的原则；

    - 前端版本发布在后端引入某种功能模块后，可以从单独的页面控制前端发布内容，比更新html更方便，也利于灰度发布；

- **Mock**

  [mock](/framework/mock/index.md)在项目中接入的形式


- **定期备份**

  场景：
    
    - 服务器损坏，导致存在该服务器上的内容全部完蛋；
    - 触发某致命bug或者错误操作（例如rm -f），导致文件和数据全部消失；
    - 数据库出现错误操作或出现问题，导致用户数据、公司资产遭受严重损失；
  

## 应用层

- **多页和单页**

  - 多页页面系统

    - 多页项目， 页面和页面之间是独立的，不存在交互， 因此当一个页面需要重构的时候， 不会影响其他页面，可维护性，可重构性高很多
    - 多页项目的缺点是不同页面切换时，会有一个白屏时间，但通常来说，这个时间并不长，大部分现有大公司的线上网页，都是这样的，因此认为是可以接受的
    - 多页项目可以单次只更新一个页面的版本，而单页项目如果其中一个功能模块要更新（特别是公共组件更新），很容易让所有页面都需要更新版本；
    - 多页项目的版本控制更简单，如果需要页面拆分，调整部分页面的使用流程，难度也会更低；
    
    - 灰度发布更友好；

- **基础组件库建设**

  - 使用ts
  - 可扩展性强
  - 适用程度高
  - 文档清晰详细
  - 版本隔离
  - 与UI协调统一

- **技术栈统一**

- **浏览器兼容性**

  - postcss
  - webpack loader
  - 

- **CDN**

- **负载均衡**
  